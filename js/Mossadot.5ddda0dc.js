(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Mossadot"],{"0f5b":function(s,t,a){"use strict";var e=a("1352"),o=a.n(e);o.a},1352:function(s,t,a){},"23bb":function(s,t,a){},"54e9":function(s,t,a){"use strict";var e=a("23bb"),o=a.n(e);o.a},a6f6:function(s,t,a){"use strict";a.r(t);var e=function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",[a("mossadotMenagement"),a("mossadHours")],1)},o=[],r=function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",[a("v-data-table",{staticClass:"elevation-3",attrs:{id:"mossadotTable",headers:s.mossadotHeaders,items:s.mossadot,search:s.search,"footer-props":{"items-per-page-options":[20,50,100,-1],"items-per-page-text":"מספר תוצאות  :"}},scopedSlots:s._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[a("v-card-title",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-text-field",{attrs:{label:"Search",placeholder:"חפש","single-line":"",autocomplete:"off","hide-details":""},model:{value:s.search,callback:function(t){s.search=t},expression:"search"}})],1)],1)],1)],1),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"50%"},scopedSlots:s._u([{key:"activator",fn:function(t){var e=t.on,o=t.attrs;return[a("v-btn",s._g(s._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",o,!1),e),[s._v("צור מוסד")])]}}]),model:{value:s.dialog,callback:function(t){s.dialog=t},expression:"dialog"}},[a("v-card",{staticClass:"center",attrs:{id:"myform"}},[a("h1",[s._v("פרטי מוסד")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"2"}},[a("v-text-field",{attrs:{type:"number",color:"indigo accent-1",label:"מספר מוסד"},model:{value:s.mossadInfo.mossadId,callback:function(t){s.$set(s.mossadInfo,"mossadId",t)},expression:"mossadInfo.mossadId"}})],1),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-text-field",{attrs:{color:"indigo accent-1",label:"שם מוסד"},model:{value:s.mossadInfo.mossadName,callback:function(t){s.$set(s.mossadInfo,"mossadName",t)},expression:"mossadInfo.mossadName"}})],1),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-select",{attrs:{items:s.mossadTypes,"item-text":"typeName","item-value":"typeId",label:"סוג  מוסד"},model:{value:s.mossadInfo.mossadType,callback:function(t){s.$set(s.mossadInfo,"mossadType",t)},expression:"mossadInfo.mossadType"}})],1)],1),a("v-row",[a("v-spacer"),a("v-btn",{staticClass:"moveRight",attrs:{color:"success"},on:{click:function(t){return s.saveMossadInfo()}}},[s._v("שמור")])],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.mossadType",fn:function(t){var a=t.item;return[s._v(" "+s._s(s.getMossadType(a.mossadType))+" ")]}},{key:"item.actions",fn:function(t){var e=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return s.editMossad(e)}}},[s._v("mdi-pencil")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return s.deleteMossad(e)}}},[s._v("mdi-delete")])]}}])})],1)},n=[],d=(a("7db0"),a("c975"),a("d81d"),a("bc3a")),i=a.n(d),l=a("1146"),c=a.n(l),m={name:"mossadotMenagement",components:{},data:function(){return{isNew:!1,mossadInfo:{},search:"",dialog:!1,mossadot:[],mossadTypes:[],mossadotHeaders:[{text:"מוסד",value:"mossadName"},{text:"סוג מוסד",value:"mossadType"},{text:"פעולות",value:"actions",sortable:!1}]}},created:function(){this.getAllMossadot(),this.getmossadTypes()},computed:{_mossadotName:function(){return this.mossadot.map((function(s){return s.mossadName}))}},methods:{getAllMossadot:function(){var s=this;i.a.get("/mossadot/all").then((function(t){s.mossadot=t.data})).catch((function(t){return s.$store.dispatch("displayErrorMessage",{error:t})}))},getmossadTypes:function(){var s=this;i.a.get("/mossadType/all").then((function(t){s.mossadTypes=t.data})).catch((function(t){return s.$store.dispatch("displayErrorMessage",{error:t})}))},createMossad:function(){this.isNew=!0,this.mossadInfo={}},saveMossadInfo:function(){var s=this,t=!1;return i()({url:"/mossadot/save",method:"post",data:this.mossadInfo}).then((function(){alert("הנתונים נשמרו בהצלחה"),t=!0,location.reload()})).catch((function(t){s.$store.dispatch("displayErrorMessage",{error:t})})),t},editMossad:function(s){this.editedIndex=this.mossadot.indexOf(s),this.mossadInfo=s,this.dialog=!0},deleteMossad:function(s){i.a.delete("/mossadot/byId",{params:{mossadId:s.mossadId}}).then((function(){alert("המוסד נמחק בהצלחה"),location.reload()})).catch((function(s){return console.log(s)}))},getMossadType:function(s){var t=this.mossadTypes.find((function(t){return t.typeId==s}));return null!=t?t.typeName:""},onExport:function(){var s=this.mossadot;s.unshift({mossadId:"קוד מוסד",mossadName:"שם מוסד",mossadType:"סוג מוסד"});var t=c.a.utils.json_to_sheet(s,{skipHeader:!0,Views:[{RTL:!0}]}),a=c.a.utils.book_new();c.a.utils.book_append_sheet(a,t,"מוסדות"),this.set_right_to_left(a),c.a.writeFile(a,"מוסדות.xlsx")},set_right_to_left:function(s){s.Workbook||(s.Workbook={}),s.Workbook.Views||(s.Workbook.Views=[]),s.Workbook.Views[0]||(s.Workbook.Views[0]={}),s.Workbook.Views[0].RTL=!0}}},u=m,f=(a("54e9"),a("2877")),v=a("6544"),h=a.n(v),p=a("8336"),b=a("b0af"),y=a("99d9"),I=a("62ad"),g=a("8fea"),x=a("169a"),k=a("132d"),_=a("0fd9"),w=a("b974"),T=a("2fa4"),M=a("8654"),V=a("71d9"),H=a("2a7f"),N=Object(f["a"])(u,r,n,!1,null,"208fe5b6",null),C=N.exports;h()(N,{VBtn:p["a"],VCard:b["a"],VCardText:y["a"],VCardTitle:y["b"],VCol:I["a"],VDataTable:g["a"],VDialog:x["a"],VIcon:k["a"],VRow:_["a"],VSelect:w["a"],VSpacer:T["a"],VTextField:M["a"],VToolbar:V["a"],VToolbarTitle:H["b"]});var $=function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",[a("v-data-table",{staticClass:"elevation-3",attrs:{id:"mossadotTable",headers:s.mossadotHeaders,items:s.mossadotHours,search:s.search,"footer-props":{"items-per-page-options":[20,50,100,-1],"items-per-page-text":"מספר תוצאות  :"}},scopedSlots:s._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[a("v-card-title",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-text-field",{attrs:{label:"Search",placeholder:"חפש","single-line":"",autocomplete:"off","hide-details":""},model:{value:s.search,callback:function(t){s.search=t},expression:"search"}})],1),a("v-col",{attrs:{cols:"12",md:"3"}},[a("v-select",{attrs:{items:s.years,"item-text":"hebrewYear","item-value":"year",label:"שנה"},model:{value:s.mossadInfo.year,callback:function(t){s.$set(s.mossadInfo,"year",t)},expression:"mossadInfo.year"}})],1)],1)],1)],1),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"50%"},scopedSlots:s._u([{key:"activator",fn:function(t){var e=t.on,o=t.attrs;return[a("v-btn",s._g(s._b({staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(t){return s.cleanmossadInfo()}}},"v-btn",o,!1),e),[s._v("הוסף שעות שנתיות ")])]}}]),model:{value:s.dialog,callback:function(t){s.dialog=t},expression:"dialog"}},[a("v-card",{staticClass:"center",attrs:{id:"myform"}},[a("h1",[s._v('מגבלת ש"ש')]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-select",{attrs:{items:s.mossadot,"item-text":"mossadName","item-value":"mossadId",label:"מוסד"},model:{value:s.mossadInfo.mossadId,callback:function(t){s.$set(s.mossadInfo,"mossadId",t)},expression:"mossadInfo.mossadId"}})],1),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-select",{attrs:{items:s.years,"item-text":"hebrewYear","item-value":"year",label:"שנה"},model:{value:s.mossadInfo.year,callback:function(t){s.$set(s.mossadInfo,"year",t)},expression:"mossadInfo.year"}})],1),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-text-field",{attrs:{type:"number",min:"0",color:"indigo accent-1",label:"מקסימום שעות"},model:{value:s.mossadInfo.maxHours,callback:function(t){s.$set(s.mossadInfo,"maxHours",t)},expression:"mossadInfo.maxHours"}})],1)],1),a("v-row",[a("v-spacer"),a("v-btn",{staticClass:"moveRight",attrs:{color:"success"},on:{click:function(t){return s.saveMossadInfo()}}},[s._v("שמור")])],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.mossadName",fn:function(t){var a=t.item;return[s._v(s._s(s.getMossadName(a.mossadId)))]}},{key:"item.actions",fn:function(t){var e=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return s.editMossad(e)}}},[s._v("mdi-pencil")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return s.deleteMossad(e)}}},[s._v("mdi-delete")])]}}])})],1)},E=[],S={name:"mossadHours",components:{},data:function(){return{isNew:!1,mossadInfo:{},search:"",years:[],dialog:!1,selectedYear:{year:2021,hebrewYear:'תשפ"א'},mossadot:[],mossadotHours:[],mossadTypes:[],mossadotHeaders:[{text:"מוסד",value:"mossadName"},{text:"שנה",value:"year"},{text:"שעות בפועל",value:"currHours"},{text:"מקסימום שעות",value:"maxHours"},{text:"פעולות",value:"actions",sortable:!1}]}},created:function(){this.initilize(),this.getAllMossadotHours(),this.getAllMossadot()},methods:{initilize:function(){this.years=[{year:2021,hebrewYear:'תשפ"א'},{year:2022,hebrewYear:'תשפ"ב'},{year:2023,hebrewYear:'תשפ"ג'},{year:2024,hebrewYear:'תשפ"ד'},{year:2025,hebrewYear:'תשפ"ה'}]},getAllMossadot:function(){var s=this;i.a.get("/mossadot/all").then((function(t){s.mossadot=t.data})).catch((function(t){return s.$store.dispatch("displayErrorMessage",{error:t})}))},getAllMossadotHours:function(){var s=this;i.a.get("/mossadHours/all").then((function(t){s.mossadotHours=t.data})).catch((function(t){return s.$store.dispatch("displayErrorMessage",{error:t})}))},getMossadName:function(s){var t=this.mossadot.find((function(t){return t.mossadId==s}));return null==t?"":t.mossadName},createMossad:function(){this.isNew=!0,this.mossadInfo={}},saveMossadInfo:function(){var s=this,t=!1;return i()({url:"/mossadHours/save",method:"post",data:this.mossadInfo}).then((function(){alert("הנתונים נשמרו בהצלחה"),t=!0,location.reload()})).catch((function(t){s.$store.dispatch("displayErrorMessage",{error:t})})),t},editMossad:function(s){this.editedIndex=this.mossadotHours.indexOf(s),this.mossadInfo=s,this.mossadInfo.year=this.selectedYear.year,this.dialog=!0},deleteMossad:function(s){console.log(s),i.a.delete("/mossadHours/byId",{params:{mossadId:s.mossadId,year:s.year}}).then((function(){alert("פעולת המחיקה בוצעה בהצלחה"),location.reload()})).catch((function(s){return console.log(s)}))},cleanmossadInfo:function(){this.mossadInfo={}}}},Y=S,W=(a("0f5b"),Object(f["a"])(Y,$,E,!1,null,"2da67965",null)),A=W.exports;h()(W,{VBtn:p["a"],VCard:b["a"],VCardText:y["a"],VCardTitle:y["b"],VCol:I["a"],VDataTable:g["a"],VDialog:x["a"],VIcon:k["a"],VRow:_["a"],VSelect:w["a"],VSpacer:T["a"],VTextField:M["a"],VToolbar:V["a"],VToolbarTitle:H["b"]});var R={name:"mossadot",components:{mossadotMenagement:C,mossadHours:A}},O=R,j=Object(f["a"])(O,e,o,!1,null,"1a3de037",null);t["default"]=j.exports}}]);
//# sourceMappingURL=Mossadot.5ddda0dc.js.map