(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Mossadot"],{"2bfd":function(t,e,s){},"374a":function(t,e,s){},"7dea":function(t,e,s){"use strict";var a=s("7f89"),o=s.n(a);o.a},"7f89":function(t,e,s){},"885a":function(t,e,s){"use strict";var a=s("ce15"),o=s.n(a);o.a},9749:function(t,e,s){"use strict";var a=s("374a"),o=s.n(a);o.a},a6f6:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("mosssadotMenagement")],1)},o=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"wrapper",attrs:{"background-color":"#ffffe6"}},[s("v-card-title",{attrs:{"primary-title":""}},[t._v("ניהול מוסדות")]),s("v-row",[s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-autocomplete",{attrs:{items:t.mossadot,color:"primary","hide-no-data":"","hide-selected":"","item-text":"mossadName","item-value":"mossadId",placeholder:"חפש מוסד","prepend-icon":"mdi-database-search","return-object":""},model:{value:t.mossadInfo,callback:function(e){t.mossadInfo=e},expression:"mossadInfo"}})],1),void 0!=t.mossadInfo.mossadId?s("v-col",{attrs:{cols:"12",md:"2"}},[s("h4",{staticClass:"centerize"},[t._v("קוד מוסד - "+t._s(t.mossadInfo.mossadId))])]):t._e(),s("v-btn",{staticClass:"centerize",attrs:{color:"success"},on:{click:function(e){return t.createMossad()}}},[t._v("צור מוסד")]),s("v-btn",{staticClass:"centerize",attrs:{color:"success"},on:{click:function(e){return t.onexport()}}},[t._v("ייצא לאקסל")])],1),null!=t.mossadInfo?s("mosssadDetails",{attrs:{mossadInfo:t.mossadInfo}}):t._e(),1==t.isNew&&void 0==t.mossadInfo.mossadId?s("createMossad"):t._e()],1)},n=[],r=(s("d81d"),s("bc3a")),l=s.n(r),d=s("1146"),c=s.n(d),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return Object.keys(this.mossadInfo).length>0?s("v-form",{staticClass:"test"},[s("v-row",[s("v-btn",{staticClass:"moveLeft",attrs:{fab:"",small:""},on:{click:function(e){t.isEditing=!t.isEditing}}},[t.isEditing?s("v-icon",[t._v("mdi-close")]):s("v-icon",[t._v("mdi-pencil")])],1),s("v-col",{attrs:{cols:"12"}},[s("p",[t._v("מוסד - "+t._s(t.mossadInfo.mossadName))])])],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{disabled:!t.isEditing,color:"indigo accent-1",label:"שם מוסד"},model:{value:t.mossadInfo.mossadName,callback:function(e){t.$set(t.mossadInfo,"mossadName",e)},expression:"mossadInfo.mossadName"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{items:t.mossadTypes,disabled:!t.isEditing,"item-text":"typeName","item-value":"typeId",label:"סוג  מוסד"},model:{value:t.mossadInfo.mossadType,callback:function(e){t.$set(t.mossadInfo,"mossadType",e)},expression:"mossadInfo.mossadType"}})],1),s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-text-field",{attrs:{disabled:!0,color:"white",label:"שעות במוסד"},model:{value:t.mossadInfo.currHours,callback:function(e){t.$set(t.mossadInfo,"currHours",e)},expression:"mossadInfo.currHours"}})],1),s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-text-field",{attrs:{disabled:!t.isEditing,color:"indigo accent-1",label:"מספר שעות מקסימלי"},model:{value:t.mossadInfo.maxHours,callback:function(e){t.$set(t.mossadInfo,"maxHours",e)},expression:"mossadInfo.maxHours"}})],1)],1),s("v-row",[s("v-spacer"),s("v-btn",{staticClass:"moveRight",attrs:{disabled:!t.isEditing,color:"success"},on:{click:function(e){return t.saveMossadInfo()}}},[t._v("שמור")])],1),void 0!=t.mossadInfo.mossadId?s("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.deleteMossad()}}},[t._v("מחק מוסד")]):t._e()],1):t._e()},u=[],m={name:"mosssadDetails",props:["mossadInfo"],data:function(){return{isEditing:null,isSaved:!1,mossadTypes:[]}},created:function(){this.getmossadTypes()},computed:{_mossadInfo:function(){return this.mossadInfo}},methods:{getmossadTypes:function(){var t=this;l.a.get("/mossadType/all").then((function(e){t.mossadTypes=e.data})).catch((function(e){return t.$store.dispatch("displayErrorMessage",{error:e})}))},saveMossadInfo:function(){var t=this,e=!1;return l()({url:"/mossadot/save",method:"post",data:this.mossadInfo}).then((function(){alert("הנתונים נשמרו בהצלחה"),e=!0})).catch((function(e){t.$store.dispatch("displayErrorMessage",{error:e})})),e},deleteMossad:function(){l.a.delete("/mossadot",{params:{mossadId:this.mossadInfo.mossadId}}).then().catch((function(t){return console.log(t)}))}}},f=m,p=(s("9749"),s("2877")),I=s("6544"),v=s.n(I),g=s("8336"),b=s("62ad"),x=s("58df"),y=s("7e2b"),S=s("3206"),_=Object(x["a"])(y["a"],Object(S["b"])("form")).extend({name:"v-form",inheritAttrs:!1,props:{lazyValidation:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",e=>{this.$set(this.errorBag,t._uid,e)},{immediate:!0}),s={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?s.shouldValidate=t.$watch("shouldValidate",a=>{a&&(this.errorBag.hasOwnProperty(t._uid)||(s.valid=e(t)))}):s.valid=e(t),s},validate(){return 0===this.inputs.filter(t=>!t.validate(!0)).length},reset(){this.inputs.forEach(t=>t.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(t=>t.resetValidation()),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find(e=>e._uid===t._uid);if(!e)return;const s=this.watchers.find(t=>t._uid===e._uid);s&&(s.valid(),s.shouldValidate()),this.watchers=this.watchers.filter(t=>t._uid!==e._uid),this.inputs=this.inputs.filter(t=>t._uid!==e._uid),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}}),w=s("132d"),V=s("0fd9"),k=s("b974"),T=s("2fa4"),M=s("8654"),$=Object(p["a"])(f,h,u,!1,null,"20a9ebb6",null),C=$.exports;v()($,{VBtn:g["a"],VCol:b["a"],VForm:_,VIcon:w["a"],VRow:V["a"],VSelect:k["a"],VSpacer:T["a"],VTextField:M["a"]});var D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-form",{staticClass:"test"},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{rules:t.requiredFieldRull,color:"indigo accent-1",label:"שם מוסד"},model:{value:t.mossadInfo.mossadName,callback:function(e){t.$set(t.mossadInfo,"mossadName",e)},expression:"mossadInfo.mossadName"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{rules:t.requiredFieldRull,color:"indigo accent-1",label:"קוד מוסד"},model:{value:t.mossadInfo.mossadId,callback:function(e){t.$set(t.mossadInfo,"mossadId",t._n(e))},expression:"mossadInfo.mossadId"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{items:t.mossadTypes,"item-text":"typeName","item-value":"typeId",label:"סוג  מוסד"},model:{value:t.mossadInfo.mossadType,callback:function(e){t.$set(t.mossadInfo,"mossadType",e)},expression:"mossadInfo.mossadType"}})],1),s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-text-field",{attrs:{color:"indigo accent-1",label:"מספר שעות מקסימלי"},model:{value:t.mossadInfo.maxHours,callback:function(e){t.$set(t.mossadInfo,"maxHours",e)},expression:"mossadInfo.maxHours"}})],1)],1),s("v-row",[s("v-spacer"),s("v-btn",{staticClass:"moveRight",attrs:{color:"success"},on:{click:function(e){return t.saveMossadInfo()}}},[t._v("שמור")])],1),void 0!=t.mossadInfo.mossadId?s("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.deleteMossad()}}},[t._v("מחק מוסד")]):t._e()],1)},E=[],F={name:"createMossad",data:function(){return{mossadInfo:{},isEditing:null,isSaved:!1,mossadTypes:[],requiredFieldRull:[function(t){return!!t||"שדה חובה"}]}},created:function(){this.getmossadTypes()},computed:{_mossadInfo:function(){return this.mossadInfo}},methods:{getmossadTypes:function(){var t=this;l.a.get("/mossadType/all").then((function(e){t.mossadTypes=e.data})).catch((function(e){return t.$store.dispatch("displayErrorMessage",{error:e})}))},saveMossadInfo:function(){var t=this,e=!1;return l()({url:"/mossadot/save",method:"post",data:this.mossadInfo}).then((function(){alert("הנתונים נשמרו בהצלחה"),e=!0})).catch((function(e){t.$store.dispatch("displayErrorMessage",{error:e})})),e},deleteMossad:function(){l.a.delete("/mossadot",{params:{mossadId:this.mossadInfo.mossadId}}).then().catch((function(t){return console.log(t)}))}}},N=F,B=(s("885a"),Object(p["a"])(N,D,E,!1,null,"98c99694",null)),O=B.exports;v()(B,{VBtn:g["a"],VCol:b["a"],VForm:_,VRow:V["a"],VSelect:k["a"],VSpacer:T["a"],VTextField:M["a"]});var j={name:"mosssadotMenagement",components:{mosssadDetails:C,createMossad:O},data:function(){return{isNew:!1,mossadInfo:{},mossadot:[]}},created:function(){this.getAllMossadot()},computed:{_mossadotName:function(){return this.mossadot.map((function(t){return t.mossadName}))}},methods:{getAllMossadot:function(){var t=this;l.a.get("/mossadot/all").then((function(e){t.mossadot=e.data})).catch((function(e){return t.$store.dispatch("displayErrorMessage",{error:e})}))},createMossad:function(){this.isNew=!0,this.mossadInfo={}},onexport:function(){var t=this.mossadot;t.unshift({mossadId:"קוד מוסד",mossadName:"שם מוסד",mossadType:"סוג מוסד",maxHours:"מקסימום שעות",currHours:"שעות בפועל"});var e=c.a.utils.json_to_sheet(t,{skipHeader:!0,Views:[{RTL:!0}]}),s=c.a.utils.book_new();c.a.utils.book_append_sheet(s,e,"מוסדות"),this.set_right_to_left(s),c.a.writeFile(s,"מוסדות.xlsx")},set_right_to_left:function(t){t.Workbook||(t.Workbook={}),t.Workbook.Views||(t.Workbook.Views=[]),t.Workbook.Views[0]||(t.Workbook.Views[0]={}),t.Workbook.Views[0].RTL=!0}}},z=j,H=(s("7dea"),s("c6a6")),A=s("b0af"),R=s("99d9"),L=Object(p["a"])(z,i,n,!1,null,"8635b95c",null),W=L.exports;v()(L,{VAutocomplete:H["a"],VBtn:g["a"],VCard:A["a"],VCardTitle:R["c"],VCol:b["a"],VRow:V["a"]});var P={name:"mossadot",components:{mosssadotMenagement:W}},q=P,J=Object(p["a"])(q,a,o,!1,null,"2e297360",null);e["default"]=J.exports},c6a6:function(t,e,s){"use strict";s("2bfd");var a=s("b974"),o=s("8654"),i=s("d9f7"),n=s("80d2");const r={...a["b"],offsetY:!0,offsetOverflow:!0,transition:!1};e["a"]=a["a"].extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:(t,e,s)=>s.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1},hideNoData:Boolean,menuProps:{type:a["a"].options.props.menuProps.type,default:()=>r},noFilter:Boolean,searchInput:{type:String,default:void 0}},data(){return{lazySearch:this.searchInput}},computed:{classes(){return{...a["a"].options.computed.classes.call(this),"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1}},computedItems(){return this.filteredItems},selectedValues(){return this.selectedItems.map(t=>this.getValue(t))},hasDisplayedItems(){return this.hideSelected?this.filteredItems.some(t=>!this.hasItem(t)):this.filteredItems.length>0},currentRange(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems(){return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter(t=>this.filter(t,String(this.internalSearch),String(this.getText(t))))},internalSearch:{get(){return this.lazySearch},set(t){this.lazySearch=t,this.$emit("update:search-input",t)}},isAnyValueAllowed(){return!1},isDirty(){return this.searchIsDirty||this.selectedItems.length>0},isSearching(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps(){const t=a["a"].options.computed.$_menuProps.call(this);return t.contentClass=("v-autocomplete__content "+(t.contentClass||"")).trim(),{...r,...t}},searchIsDirty(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem(){return this.multiple?null:this.selectedItems.find(t=>this.valueComparator(this.getValue(t),this.getValue(this.internalValue)))},listData(){const t=a["a"].options.computed.listData.call(this);return t.props={...t.props,items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch},t}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused(t){t?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.updateSelf())},isMenuActive(t){!t&&this.hasSlot&&(this.lazySearch=void 0)},items(t,e){e&&e.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!t.length||this.activateMenu()},searchInput(t){this.lazySearch=t},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created(){this.setSearch()},methods:{onFilteredItemsChanged(t,e){t!==e&&(this.setMenuIndex(-1),this.$nextTick(()=>{this.internalSearch&&(1===t.length||this.autoSelectFirst)&&(this.$refs.menu.getTiles(),this.setMenuIndex(0))}))},onInternalSearchChanged(){this.updateMenuDimensions()},updateMenuDimensions(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex(t){this.searchIsDirty||(this.multiple&&t===n["u"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&t===n["u"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:t!==n["u"].backspace&&t!==n["u"].delete||this.deleteCurrentItem())},deleteCurrentItem(){if(this.readonly)return;const t=this.selectedItems.length-1;if(-1===this.selectedIndex&&0!==t)return void(this.selectedIndex=t);const e=this.selectedItems[this.selectedIndex];if(this.getDisabled(e))return;const s=this.selectedIndex===t?this.selectedIndex-1:this.selectedItems[this.selectedIndex+1]?this.selectedIndex:-1;-1===s?this.setValue(this.multiple?[]:void 0):this.selectItem(e),this.selectedIndex=s},clearableCallback(){this.internalSearch=void 0,a["a"].options.methods.clearableCallback.call(this)},genInput(){const t=o["a"].options.methods.genInput.call(this);return t.data=Object(i["a"])(t.data,{attrs:{"aria-activedescendant":Object(n["m"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(n["m"])(t.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),t},genInputSlot(){const t=a["a"].options.methods.genInputSlot.call(this);return t.data.attrs.role="combobox",t},genSelections(){return this.hasSlot||this.multiple?a["a"].options.methods.genSelections.call(this):[]},onClick(t){this.isDisabled||(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(t.target)||this.activateMenu())},onInput(t){if(this.selectedIndex>-1||!t.target)return;const e=t.target,s=e.value;e.value&&this.activateMenu(),this.internalSearch=s,this.badInput=e.validity&&e.validity.badInput},onKeyDown(t){const e=t.keyCode;a["a"].options.methods.onKeyDown.call(this,t),this.changeSelectedIndex(e)},onSpaceDown(t){},onTabDown(t){a["a"].options.methods.onTabDown.call(this,t),this.updateSelf()},onUpDown(t){t.preventDefault(),this.activateMenu()},selectItem(t){a["a"].options.methods.selectItem.call(this,t),this.setSearch()},setSelectedItems(){a["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch(){this.$nextTick(()=>{this.multiple&&this.internalSearch&&this.isMenuActive||(this.internalSearch=!this.selectedItems.length||this.multiple||this.hasSlot?null:this.getText(this.selectedItem))})},updateSelf(){(this.searchIsDirty||this.internalValue)&&(this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem(t){return this.selectedValues.indexOf(this.getValue(t))>-1},onCopy(t){if(-1===this.selectedIndex)return;const e=this.selectedItems[this.selectedIndex],s=this.getText(e);t.clipboardData.setData("text/plain",s),t.clipboardData.setData("text/vnd.vuetify.autocomplete.item+plain",s),t.preventDefault()}}})},ce15:function(t,e,s){}}]);
//# sourceMappingURL=Mossadot.79421eac.js.map