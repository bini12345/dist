(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["reportWeeklyHours"],{"13d5":function(e,t,r){"use strict";var n=r("23e7"),a=r("d58f").left,o=r("a640"),s=r("ae40"),i=o("reduce"),c=s("reduce",{1:0});n({target:"Array",proto:!0,forced:!i||!c},{reduce:function(e){return a(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"159b":function(e,t,r){var n=r("da84"),a=r("fdbc"),o=r("17c2"),s=r("9112");for(var i in a){var c=n[i],l=c&&c.prototype;if(l&&l.forEach!==o)try{s(l,"forEach",o)}catch(u){l.forEach=o}}},"17c2":function(e,t,r){"use strict";var n=r("b727").forEach,a=r("a640"),o=r("ae40"),s=a("forEach"),i=o("forEach");e.exports=s&&i?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},"1da1":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("d3b7"),r("e6cf");function n(e,t,r,n,a,o,s){try{var i=e[o](s),c=i.value}catch(l){return void r(l)}i.done?t(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,o){var s=e.apply(t,r);function i(e){n(s,a,o,i,c,"next",e)}function c(e){n(s,a,o,i,c,"throw",e)}i(void 0)}))}}},"2bfd":function(e,t,r){},4160:function(e,t,r){"use strict";var n=r("23e7"),a=r("17c2");n({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"45fc":function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").some,o=r("a640"),s=r("ae40"),i=o("some"),c=s("some");n({target:"Array",proto:!0,forced:!i||!c},{some:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"4de4":function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").filter,o=r("1dde"),s=r("ae40"),i=o("filter"),c=s("filter");n({target:"Array",proto:!0,forced:!i||!c},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"7db0":function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").find,o=r("44d2"),s=r("ae40"),i="find",c=!0,l=s(i);i in[]&&Array(1)[i]((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!l},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o(i)},"87cf":function(e,t,r){"use strict";r("4de4"),r("7db0"),r("4160"),r("a15b"),r("d81d"),r("159b"),r("96cf");var n=r("1da1"),a=r("1146"),o=r.n(a),s=r("bc3a"),i=r.n(s);t["a"]={data:function(){return{localMossadId:null,allEmpsInfo:[],codeDescription:[],empsHours:[],dataToExport:[]}},created:function(){this.getCodesDescription()},methods:{createWeeklyHoursToMossad:function(e,t,r){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.getAllEmpInfo(e,t,r);case 2:return n.next=4,a.getAllEmpHours(e,t,r);case 4:return n.next=6,a.setWeeklyHoursAndExport(e);case 6:a.dataToExport=[],a.allEmpsInfo=[],a.empsHours=[];case 9:case"end":return n.stop()}}),n)})))()},createWeeklyHoursToEmployee:function(e,t,r,a){var o=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,o.getEmpInfo(e,t,r,a);case 2:return n.next=4,o.getEmpHours(e,t,r,a);case 4:return n.next=6,o.setWeeklyHoursAndExport(t);case 6:o.dataToExport=[],o.allEmpsInfo=[],o.empsHours=[];case 9:case"end":return n.stop()}}),n)})))()},setWeeklyHoursAndExport:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n="",r.next=3,i.a.get("/mossadot/byId",{params:{mossadId:e}}).then((function(e){n=e.data.mossadName})).catch((function(e){console.log(e)}));case 3:t.allEmpsInfo.forEach((function(r){t.setExistHours(r,t.empsHours.filter((function(e){return e.empId==r.empId})),e,n)})),t.setDataForDisplay(t.dataToExport),t.downloadFile(t.dataToExport,t.getWeeklyHoursHeaders(),"מצבת שעות.xlsx","מערכת שעות פרונטליות");case 6:case"end":return r.stop()}}),r)})))()},getEmpHours:function(e,t,r,a){var o=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,i.a.get("/teacherEmploymentDetails/byMossad",{params:{empId:e,mossadId:t,begda:r,endda:a}}).then((function(e){o.empsHours=e.data}));case 2:case"end":return n.stop()}}),n)})))()},getEmpInfo:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,i.a.get("/employees/byId",{params:{empId:e}}).then((function(e){t.allEmpsInfo.push(e.data)}));case 2:case"end":return r.stop()}}),r)})))()},getAllEmpInfo:function(e,t,r){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,i.a.get("/employees/byMossad",{params:{mossadId:e,begda:t,endda:r}}).then((function(e){a.allEmpsInfo=e.data}));case 2:case"end":return n.stop()}}),n)})))()},getAllEmpHours:function(e,t,r){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,i.a.get("/teacherEmploymentDetails/allByMossad",{params:{mossadId:e,begda:t,endda:r}}).then((function(e){a.empsHours=e.data}));case 2:case"end":return n.stop()}}),n)})))()},getCodesDescription:function(){var e=this;i.a.get("/convertHours/all").then((function(t){e.codeDescription=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},downloadDemoFile:function(){var e=[];this.downloadFile(e,this.getWeeklyHoursHeaders(),"מצבת שעות.xlsx","מערכת שעות פרונטליות")},downloadFile:function(e,t,r,n){var a=e;a.unshift(t);var s=o.a.utils.json_to_sheet(a,{skipHeader:!0,Views:[{RTL:!0}]}),i=o.a.utils.book_new();o.a.utils.book_append_sheet(i,s,n),this.set_right_to_left(i),o.a.writeFile(i,r)},set_right_to_left:function(e){e.Workbook||(e.Workbook={}),e.Workbook.Views||(e.Workbook.Views=[]),e.Workbook.Views[0]||(e.Workbook.Views[0]={},e.Workbook.Views[0].RTL=!0)},setExistHours:function(e,t,r,n){var a=this,o={},s=[];t.forEach((function(t){a.codeDescription.find((function(e){return e.code==t.empCode})).hourType,void 0==s.find((function(e){return e.code==t.empCode&&e.begda==t.begda&&e.endda==t.endda}))&&(o={empId:e.empId,lastName:e.lastName,firstName:e.firstName,ageHours:a.getAgeHours(e.birthDate),isMother:a.getIsMother(e.mother),code:t.empCode,codeDescription:a.getCodeDescription(t.empCode),mossadId:r+"100",mossadName:n,begda:t.begda,endda:t.endda,Sunday:0,Monday:0,Tuesday:0,Wednesday:0,Thursday:0,Friday:0,totalHours:0,reformType:a.getReformType(t.empCode),systemMessages:""},s.push(o)),a.setHoursInDay(s.find((function(e){return e.code==t.empCode&&e.begda==t.begda&&e.endda==t.endda})),t.day,t.hours)})),this.dataToExport.push.apply(this.dataToExport,s)},sortWeeklyhoursTable:function(e){e.sort((function(e,t){return e.empCode-t.empCode}))},getWeeklyHoursHeaders:function(){var e={empId:"מספר עובד",lastName:"שם משפחה",firstName:"שם פרטי",ageHours:"שעות גיל",isMother:"מורה אם",code:"פיצול",codeDescription:"תאור פיצול",mossadId:"מוסד",mossadName:"שם מוסד",begda:"מתאריך",endda:"עד תאריך",Sunday:"א'",Monday:"ב'",Tuesday:"ג'",Wednesday:"ד",Thursday:"ה'",Friday:"ו'",totalHours:'סה"כ שעות פרונטליות',reformType:"רפורמה",systemMessages:"הערות מערכת"};return e},setDataForDisplay:function(e){var t=this;e.forEach((function(e){e.begda=t.formattedDate(e.begda),e.endda=t.formattedDate(e.endda)}))},setHoursInDay:function(e,t,r){0==t?e.Sunday+=r:1==t?e.Monday+=r:2==t?e.Tuesday+=r:3==t?e.Wednesday+=r:4==t?e.Thursday+=r:5==t&&(e.Friday+=r),e.totalHours+=r},formattedDate:function(e){var t=new Date(e);return[t.getDate(),t.getMonth()+1,t.getFullYear()].map((function(e){return e<10?"0".concat(e):"".concat(e)})).join("/")},fromatGenderText:function(e){return"F"==e?"נקבה":"זכר"},formatMotherType:function(e){return 1==e?"כן":"לא"},getIsMother:function(e){return"לא"==e?0:1},getAgeHours:function(e){var t=new Date(e),r=new Date,n=new Date(r.getFullYear(),8,1);r.getUTCMonth()>8&&n.setFullYear(n.getFullYear()+1);var a=n.getFullYear()-t.getFullYear();return a<50?0:a>55?4:2},getCodeDescription:function(e){return this.codeDescription.find((function(t){return t.code==e})).codeDescription},getReformType:function(e){return"TODO"}}}},"96cf":function(e,t,r){var n=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function c(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),s=new L(n||[]);return o._invoke=S(e,r,s),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}e.wrap=c;var u="suspendedStart",d="suspendedYield",h="executing",f="completed",p={};function m(){}function y(){}function g(){}var v={};v[o]=function(){return this};var I=Object.getPrototypeOf,x=I&&I(I(C([])));x&&x!==r&&n.call(x,o)&&(v=x);var b=g.prototype=m.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function D(e,t){function r(a,o,s,i){var c=l(e[a],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"===typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,i)}),(function(e){r("throw",e,s,i)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,i)}))}i(c.arg)}var a;function o(e,n){function o(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(o,o):o()}this._invoke=o}function S(e,t,r){var n=u;return function(a,o){if(n===h)throw new Error("Generator is already running");if(n===f){if("throw"===a)throw o;return H()}r.method=a,r.arg=o;while(1){var s=r.delegate;if(s){var i=T(s,r);if(i){if(i===p)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===u)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var c=l(e,t,r);if("normal"===c.type){if(n=r.done?f:d,c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=f,r.method="throw",r.arg=c.arg)}}}function T(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator["return"]&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var a=l(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,p;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function C(e){if(e){var r=e[o];if(r)return r.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,s=function r(){while(++a<e.length)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}return{next:H}}function H(){return{value:t,done:!0}}return y.prototype=b.constructor=g,g.constructor=y,g[i]=y.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,i in e||(e[i]="GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(D.prototype),D.prototype[s]=function(){return this},e.AsyncIterator=D,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var s=new D(c(t,r,n,a),o);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},w(b),b[i]="Generator",b[o]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){while(t.length){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=n}catch(a){Function("r","regeneratorRuntime = r")(n)}},a15b:function(e,t,r){"use strict";var n=r("23e7"),a=r("44ad"),o=r("fc6a"),s=r("a640"),i=[].join,c=a!=Object,l=s("join",",");n({target:"Array",proto:!0,forced:c||!l},{join:function(e){return i.call(o(this),void 0===e?",":e)}})},a429:function(e,t,r){"use strict";var n=r("b204"),a=r.n(n);a.a},a7a1:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("reportWeeklyHours")],1)},a=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-row",{staticClass:"center",attrs:{id:"selections"}},[r("v-col",{attrs:{cols:"12",md:"2"}},[r("v-select",{attrs:{items:e.years,"item-text":"hebrewYear","item-value":"year",label:"שנה",placeholder:"בחר שנה"},model:{value:e.selections.year,callback:function(t){e.$set(e.selections,"year",t)},expression:"selections.year"}})],1),r("v-col",{attrs:{cols:"12",md:"2"}},[r("v-autocomplete",{attrs:{multiple:"",items:e.mossadot,"item-text":"mossadName","item-value":"mossadId",label:"מוסד",placeholder:"בחר מוסד"},model:{value:e.selections.mossadId,callback:function(t){e.$set(e.selections,"mossadId",t)},expression:"selections.mossadId"}})],1),r("v-col",{attrs:{cols:"12",md:"2"}},[r("v-select",{attrs:{multiple:"",items:e.reformTypes,"item-text":"name","item-value":"reformId",placeholder:"בחר רפורמה",label:"רפורמה"},model:{value:e.selections.reformType,callback:function(t){e.$set(e.selections,"reformType",t)},expression:"selections.reformType"}})],1),r("v-col",{attrs:{cols:"12",md:"2"}},[r("v-select",{attrs:{multiple:"",items:e.codeDescription,"item-text":function(e){return e.code+" - "+e.codeDescription},"item-value":"code",label:"קוד פיצול",placeholder:"בחר קוד פיצול"},model:{value:e.selections.code,callback:function(t){e.$set(e.selections,"code",t)},expression:"selections.code"}})],1),r("v-col",{attrs:{cols:"12",md:"2"}},[r("v-text-field",{attrs:{label:"סטטוס"},model:{value:e.selections.status,callback:function(t){e.$set(e.selections,"status",t)},expression:"selections.status"}})],1)],1),r("v-btn",{staticStyle:{"margin-right":"5%"},attrs:{color:"primary"},on:{click:function(t){return e.getSelectedData()}}},[e._v("חפש")]),r("div",{attrs:{id:"weeklyHoursReport"}},[r("v-data-table",{staticClass:"elevation-1",attrs:{dense:"",headers:e.headers,items:e.dataToDisplay,search:e.search,"footer-props":{"items-per-page-options":[20,50,100,-1],"items-per-page-text":"מספר תוצאות  :"},"no-data-text":"","item-key":"empId"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:"",color:"white"}},[r("v-toolbar-title",[r("v-card-title",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"10"}},[r("v-text-field",{attrs:{label:"Search",placeholder:"חפש","single-line":"",autocomplete:"off","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1)],1),r("v-spacer"),r("v-btn",{attrs:{color:"success"},on:{click:function(t){return e.exportDataToExcel()}}},[e._v("ייצא לקסל")])],1)]},proxy:!0},{key:"item",fn:function(t){var n=t.item;return[r("tr",[r("td",[e._v(e._s(n.empId))]),r("td",[e._v(e._s(n.firstName))]),r("td",[e._v(e._s(n.lastName))]),r("td",[e._v(e._s(n.frontalHours))])])]}}])},[r("template",{slot:"body.append"},[r("tr",[r("td",{staticClass:"title"}),r("td",{staticClass:"title"}),r("td",{staticClass:"title"},[e._v("עובדים - "+e._s(e.dataToDisplay.length))]),r("td",{staticClass:"title"},[e._v("סך שעות - "+e._s(e.totalHours()))])])])],2)],1)],1)},s=[],i=(r("4de4"),r("7db0"),r("4160"),r("13d5"),r("45fc"),r("159b"),r("bc3a")),c=r.n(i),l=r("87cf"),u=1,d={data:function(){return{headers:[],search:"",years:[{year:2021,hebrewYear:'תשפ"א'},{year:2022,hebrewYear:'תשפ"ב'},{year:2023,hebrewYear:'תשפ"ג'},{year:2024,hebrewYear:'תשפ"ד'},{year:2025,hebrewYear:'תשפ"ה'}],mossadot:[],employees:[],reformTypes:[],codeDescription:[],existData:[],dataToDisplay:[],selections:{year:0,mossadId:null,reformType:null,code:null,status:null}}},created:function(){this.initilize(),this.getCodeDescription(),this.getMossadot(),this.getReformTypes(),this.getEmployees()},methods:{initilize:function(){this.headers=[{text:"תעודת זהות",value:"empId"},{text:"שם פרטי",value:"firstName"},{text:"שם משפחה",value:"lastName"},{text:"שעות פרונטליות",value:"frontalHours"}];var e=new Date;this.selections.year=e.getMonth()>=8?e.getFullYear()+1:e.getFullYear()},getMossadot:function(){var e=this;c.a.get("mossadot/all").then((function(t){e.mossadot=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},getEmployees:function(){var e=this;c.a.get("/employees/all").then((function(t){e.employees=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},getReformTypes:function(){var e=this;c.a.get("/reformTypes/relevant").then((function(t){e.reformTypes=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},getCodeDescription:function(){var e=this;c.a.get("/convertHours/all").then((function(t){e.codeDescription=t.data,e.codeDescription=t.data.filter((function(e){return e.hourType==u||0==e.hourType}))})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},setDataToDispay:function(){var e=this;this.dataToDisplay=[],this.existData.forEach((function(t){var r=e.dataToDisplay.find((function(e){return e.empId==t.empId}));null!=r?r.frontalHours+=t.hours:e.dataToDisplay.push({empId:t.empId,frontalHours:t.hours})})),this.dataToDisplay.forEach((function(t){var r=e.employees.find((function(e){return e.empId==t.empId}));t.firstName=r.firstName,t.lastName=r.lastName}))},totalHours:function(){return this.dataToDisplay.reduce((function(e,t){return e+parseFloat(t.frontalHours)}),0)},getSelectedData:function(){var e=this,t={begda:this.formatDate(new Date(this.selections.year-2,8,1)),endda:this.formatDate(new Date(this.selections.year+2,5,20)),mossadId:this.addSpaceIfNeeded(this.selections.mossadId),reformType:this.addSpaceIfNeeded(this.selections.reformType),empCode:this.addSpaceIfNeeded(this.selections.code),status:this.selections.status};c.a.get("teacherEmploymentDetails/getReport",{params:t}).then((function(t){e.existData=t.data.filter((function(t){return e.codeDescription.some((function(e){return e.code==t.empCode}))})),e.setDataToDispay()})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},formatDate:function(e){var t,r=new Date(e),n=r.getFullYear(),a=0,o=0;return a+=r.getMonth()+1,a<10&&(a="0"+a),r.getDate()<10&&(o="0"),o+=r.getDate(),t=n+"-"+a+"-"+o,t},addSpaceIfNeeded:function(e){return null!=e?e+"":e},exportDataToExcel:function(){var e=this,t=[],r={year:"שנה",empId:"תעודת זהות",firstName:"שם פרטי",lastName:"שם משפחה",frontalHours:"שעות פרונטליות"};this.dataToDisplay.forEach((function(r){t.push({year:e.selections.year,empId:r.empId,firstName:r.firstName,lastName:r.lastName,frontalHours:r.frontalHours})})),this.downloadFile(t,r,"דוח שעות.xlsx","סיכום שעות")}},mixins:[l["a"]]},h=d,f=(r("a429"),r("2877")),p=r("6544"),m=r.n(p),y=r("c6a6"),g=r("8336"),v=r("99d9"),I=r("62ad"),x=r("8fea"),b=r("0fd9"),w=r("b974"),D=r("2fa4"),S=r("8654"),T=r("71d9"),E=r("2a7f"),k=Object(f["a"])(h,o,s,!1,null,"da5ae060",null),L=k.exports;m()(k,{VAutocomplete:y["a"],VBtn:g["a"],VCardTitle:v["b"],VCol:I["a"],VDataTable:x["a"],VRow:b["a"],VSelect:w["a"],VSpacer:D["a"],VTextField:S["a"],VToolbar:T["a"],VToolbarTitle:E["a"]});var C={name:"test",components:{reportWeeklyHours:L},data:function(){return{}}},H=C,M=Object(f["a"])(H,n,a,!1,null,"2889ed8e",null);t["default"]=M.exports},b204:function(e,t,r){},c6a6:function(e,t,r){"use strict";r("2bfd");var n=r("b974"),a=r("8654"),o=r("d9f7"),s=r("80d2");const i={...n["b"],offsetY:!0,offsetOverflow:!0,transition:!1};t["a"]=n["a"].extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:(e,t,r)=>r.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1},hideNoData:Boolean,menuProps:{type:n["a"].options.props.menuProps.type,default:()=>i},noFilter:Boolean,searchInput:{type:String,default:void 0}},data(){return{lazySearch:this.searchInput}},computed:{classes(){return{...n["a"].options.computed.classes.call(this),"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1}},computedItems(){return this.filteredItems},selectedValues(){return this.selectedItems.map(e=>this.getValue(e))},hasDisplayedItems(){return this.hideSelected?this.filteredItems.some(e=>!this.hasItem(e)):this.filteredItems.length>0},currentRange(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems(){return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter(e=>{const t=Object(s["q"])(e,this.itemText),r=null!=t?String(t):"";return this.filter(e,String(this.internalSearch),r)})},internalSearch:{get(){return this.lazySearch},set(e){this.lazySearch=e,this.$emit("update:search-input",e)}},isAnyValueAllowed(){return!1},isDirty(){return this.searchIsDirty||this.selectedItems.length>0},isSearching(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps(){const e=n["a"].options.computed.$_menuProps.call(this);return e.contentClass=("v-autocomplete__content "+(e.contentClass||"")).trim(),{...i,...e}},searchIsDirty(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem(){return this.multiple?null:this.selectedItems.find(e=>this.valueComparator(this.getValue(e),this.getValue(this.internalValue)))},listData(){const e=n["a"].options.computed.listData.call(this);return e.props={...e.props,items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch},e}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused(e){e?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.updateSelf())},isMenuActive(e){!e&&this.hasSlot&&(this.lazySearch=void 0)},items(e,t){t&&t.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!e.length||this.activateMenu()},searchInput(e){this.lazySearch=e},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created(){this.setSearch()},destroyed(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged(e,t){e!==t&&(this.setMenuIndex(-1),this.$nextTick(()=>{this.internalSearch&&(1===e.length||this.autoSelectFirst)&&(this.$refs.menu.getTiles(),this.setMenuIndex(0))}))},onInternalSearchChanged(){this.updateMenuDimensions()},updateMenuDimensions(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex(e){this.searchIsDirty||(this.multiple&&e===s["w"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&e===s["w"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:e!==s["w"].backspace&&e!==s["w"].delete||this.deleteCurrentItem())},deleteCurrentItem(){const e=this.selectedIndex,t=this.selectedItems[e];if(!this.isInteractive||this.getDisabled(t))return;const r=this.selectedItems.length-1;if(-1===this.selectedIndex&&0!==r)return void(this.selectedIndex=r);const n=this.selectedItems.length,a=e!==n-1?e:e-1,o=this.selectedItems[a];o?this.selectItem(t):this.setValue(this.multiple?[]:void 0),this.selectedIndex=a},clearableCallback(){this.internalSearch=void 0,n["a"].options.methods.clearableCallback.call(this)},genInput(){const e=a["a"].options.methods.genInput.call(this);return e.data=Object(o["a"])(e.data,{attrs:{"aria-activedescendant":Object(s["o"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(s["o"])(e.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),e},genInputSlot(){const e=n["a"].options.methods.genInputSlot.call(this);return e.data.attrs.role="combobox",e},genSelections(){return this.hasSlot||this.multiple?n["a"].options.methods.genSelections.call(this):[]},onClick(e){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(e.target)||this.activateMenu())},onInput(e){if(this.selectedIndex>-1||!e.target)return;const t=e.target,r=t.value;t.value&&this.activateMenu(),this.internalSearch=r,this.badInput=t.validity&&t.validity.badInput},onKeyDown(e){const t=e.keyCode;n["a"].options.methods.onKeyDown.call(this,e),this.changeSelectedIndex(t)},onSpaceDown(e){},onTabDown(e){n["a"].options.methods.onTabDown.call(this,e),this.updateSelf()},onUpDown(e){e.preventDefault(),this.activateMenu()},selectItem(e){n["a"].options.methods.selectItem.call(this,e),this.setSearch()},setSelectedItems(){n["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch(){this.$nextTick(()=>{this.multiple&&this.internalSearch&&this.isMenuActive||(this.internalSearch=!this.selectedItems.length||this.multiple||this.hasSlot?null:this.getText(this.selectedItem))})},updateSelf(){(this.searchIsDirty||this.internalValue)&&(this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem(e){return this.selectedValues.indexOf(this.getValue(e))>-1},onCopy(e){if(-1===this.selectedIndex)return;const t=this.selectedItems[this.selectedIndex],r=this.getText(t);e.clipboardData.setData("text/plain",r),e.clipboardData.setData("text/vnd.vuetify.autocomplete.item+plain",r),e.preventDefault()}}})},d58f:function(e,t,r){var n=r("1c0b"),a=r("7b0b"),o=r("44ad"),s=r("50c4"),i=function(e){return function(t,r,i,c){n(r);var l=a(t),u=o(l),d=s(l.length),h=e?d-1:0,f=e?-1:1;if(i<2)while(1){if(h in u){c=u[h],h+=f;break}if(h+=f,e?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;e?h>=0:d>h;h+=f)h in u&&(c=r(c,u[h],h,l));return c}};e.exports={left:i(!1),right:i(!0)}},d81d:function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").map,o=r("1dde"),s=r("ae40"),i=o("map"),c=s("map");n({target:"Array",proto:!0,forced:!i||!c},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=reportWeeklyHours.e081dffa.js.map