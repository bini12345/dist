(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["EmployeeInfo"],{1148:function(e,t,s){"use strict";var r=s("a691"),o=s("1d80");e.exports="".repeat||function(e){var t=String(o(this)),s="",n=r(e);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(s+=t);return s}},"13d5":function(e,t,s){"use strict";var r=s("23e7"),o=s("d58f").left,n=s("a640"),a=s("ae40"),i=n("reduce"),u=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!i||!u},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"246e":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("setEmployeesHours")],1)},o=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",[s("div",{staticClass:"littleMargin"},[s("v-row",{attrs:{id:"mossadHoursDetails"}},[s("v-col",{attrs:{cols:"12",md:"2"}},[s("v-select",{attrs:{items:e.years,"item-text":"hebrewYear","item-value":"year",label:"שנה"},on:{change:function(t){return e.onYearChanged()}},model:{value:e.selectedYear,callback:function(t){e.selectedYear=t},expression:"selectedYear"}})],1),s("v-col",{attrs:{cols:"12",md:"2"}},[s("p",[e._v("מוסד - "+e._s(e.mossadInfo.mossadName))])]),s("v-col",{attrs:{cols:"12",md:"2"}},[s("p",[e._v("שעות מאוישות - "+e._s(e.mossadInfo.currHours))])]),s("v-col",{attrs:{cols:"12",md:"2"}},[s("p",[e._v("יתרת שעות - "+e._s(e.mossadInfo.maxHours-e.mossadInfo.currHours))])]),s("v-col",{attrs:{cols:"12",md:"2"}},[s("p",[e._v("מגבלת שעות- "+e._s(e.mossadInfo.maxHours))])]),s("v-col",{attrs:{cols:"12",md:"2"}},[s("p",[e._v(" אחוז איוש - "+e._s(e.getTwoDigits(e.mossadInfo.currHours/e.mossadInfo.maxHours*100))+"% ")])])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:null!=e.mossadInfo.maxHours&&0!=e.mossadInfo.maxHours,expression:"mossadInfo.maxHours != null && mossadInfo.maxHours != 0"}]},[s("v-row",[s("v-col",{attrs:{id:"serchEmployee",cols:"12",md:"3"}},[s("v-autocomplete",{attrs:{disabled:null==e.mossadInfo.maxHours||0==e.mossadInfo.maxHours,items:e.tzArray,color:"indigo lighten-5","hide-selected":"","item-text":function(e){return e.firstName+" "+e.lastName+" - "+e.empId},"item-value":"empId",label:"תעודת זהות",placeholder:"חפש"},on:{change:function(t){return e.getEmployeeInfo()}},model:{value:e.empId,callback:function(t){e.empId=t},expression:"empId"}})],1),Object.keys(this.employeeInfo).length>0?s("v-col",{attrs:{cols:"12",md:"1"}},[s("p",[e._v("שם פרטי")]),e._v(" "+e._s(e.employeeInfo.firstName)+" ")]):e._e(),Object.keys(this.employeeInfo).length>0?s("v-col",{attrs:{cols:"12",md:"1"}},[s("p",[e._v("שם משפחה")]),e._v(" "+e._s(e.employeeInfo.lastName)+" ")]):e._e(),Object.keys(this.employeeInfo).length>0?s("v-col",{attrs:{cols:"12",md:"1"}},[s("p",[e._v("גיל")]),e._v(" "+e._s(e._getAge)+" ")]):e._e(),Object.keys(this.employeeInfo).length>0?s("v-col",{attrs:{cols:"12",md:"1"}},[s("p",[e._v("משרת אם")]),e._v(" "+e._s(e.formatIsMother)+" ")]):e._e(),Object.keys(this.employeeInfo).length>0?s("v-col",{attrs:{cols:"12",md:"1"}},[s("p",[e._v("שעות גיל")]),e._v(" "+e._s(e._getAgeHours)+" ")]):e._e(),Object.keys(this.existHours).length>0?s("v-col",{attrs:{cols:"12",md:"4"}},[s("table",{attrs:{id:"detailsTable"}},[s("thead",[s("th"),s("th",[e._v("א")]),s("th",[e._v("ב")]),s("th",[e._v("ג")]),s("th",[e._v("ד")]),s("th",[e._v("ה")]),s("th",[e._v("ו")]),s("th",[e._v("סך שעות")]),s("th",[e._v("אחוז משרה")])]),s("tbody",e._l(e.existHours,(function(t,r){return s("tr",{key:r},[s("td",[e._v(e._s(e.getRowType(t.type)))]),e._l(6,(function(r){return s("td",{key:r},[s("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(o){var n=o.on,a=o.attrs;return[s("span",e._g(e._b({on:{mouseover:function(t){return e.changeText(r)}}},"span",a,!1),n),[e._v(" "+e._s(t.week[r-1]))])]}}],null,!0)},[s("span",[e._v(e._s(e.hoverText))])])],1)})),s("td",[e._v(e._s(e.totalHours(t.week)))]),s("td",[e._v(e._s(e.getTwoDigits(t.week[6]))+"%")])],2)})),0)]),s("v-icon",{staticClass:"mr-3 excelMDI",attrs:{large:""},on:{click:function(t){return e.exportEmployeeWeeklyHours()}}},[e._v("mdi-file-excel-outline")])],1):e._e()],1),null!=e.empId?s("v-row",[s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-select",{attrs:{items:e.reformTypes,"item-text":"name","item-value":"reformId",label:"בחר רפורמה",multiple:"","single-line":""},model:{value:e.selectedReforms,callback:function(t){e.selectedReforms=t},expression:"selectedReforms"}})],1)],1):e._e(),null!=e.employeeInfo&&null!=e.selectedReforms?s("v-card",e._l(e.selectedReforms,(function(t,r){return s("v-card",{key:r},[s("weeklyHours",{attrs:{empId:e.empId,reformType:t,isMother:e.employeeInfo.mother,ageHours:e._getAgeHours,selectedYear:e.selectedYear}})],1)})),1):e._e()],1)],1)])},a=[],i=(s("4de4"),s("b680"),s("bc3a")),u=s.n(i),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return null!=e.empId?s("div",{staticClass:"reformTypeTables"},[s("h1",{staticClass:"center"},[e._v(e._s(e._reformDiscription))]),e._l(e.tablesArray,(function(t,r){return s("div",{key:r},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"2"}},[s("v-text-field",{attrs:{label:"מתאריך",type:"date",min:e.datesRange.min,max:e.datesRange.max},on:{change:function(s){return e.setDatesIfChange(t)}},model:{value:t.begda,callback:function(s){e.$set(t,"begda",s)},expression:"table.begda"}},[e._v("מתאריך")])],1),s("v-col",{attrs:{cols:"12",md:"2"}},[s("v-text-field",{attrs:{label:"עד תאריך",type:"date",min:e.datesRange.min,max:e.datesRange.max},on:{change:function(s){return e.setDatesIfChange(t)}},model:{value:t.endda,callback:function(s){e.$set(t,"endda",s)},expression:"table.endda"}},[e._v("עד תאריך")])],1),s("v-col",{attrs:{cols:"12",md:"8"}},[s("weeklyHoursTable",{staticClass:"center",attrs:{empId:e.empId,reformType:e.reformType,isMother:e.isMother,ageHours:e.ageHours,existData:t.data,begda:t.begda,endda:t.endda}})],1)],1)],1)}))],2):e._e()},c=[],l=(s("7db0"),s("4160"),s("13d5"),s("b0c0"),s("159b"),s("96cf"),s("1da1")),h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return null!=e.empId?s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:0!=e.reformType,expression:"reformType != 0"}]},[s("table",{attrs:{id:"t01"}},[e._m(0),s("tbody",[e._l(e.newHours,(function(t,r){return s("tr",{key:r},[s("td",[s("div",{attrs:{id:"additionalActions"}},[t.type==e.frontalConst?s("v-icon",{attrs:{id:"myPlusIcon"},on:{click:function(t){return e.addNewRow()}}},[e._v("mdi-plus")]):e._e(),t.type==e.frontalConst&&0!=r?s("v-icon",{attrs:{id:"myMinusIcon"},on:{click:function(t){return e.removeRow(r)}}},[e._v("mdi-minus")]):e._e()],1)]),s("td",[e._v(e._s(e.convertReformDescription(t.type)))]),s("td",[t.type==e.frontalConst?s("v-select",{staticClass:"mySelectOption",attrs:{items:e.frontalCodes,"hide-selected":"","item-text":function(e){return e.code+" - "+e.codeDescription},"item-value":"code"},on:{change:function(s){return e.setPrivateAndPauseCodes(t.code)}},model:{value:t.code,callback:function(s){e.$set(t,"code",s)},expression:"row.code"}}):e._e(),t.type!=e.frontalConst?s("span",[e._v(e._s(e.currCodeDescription(t.code)))]):e._e()],1),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.hours,expression:"row.hours"}],attrs:{id:"hours",type:"number",min:"0",step:"0.1",disabled:t.code<=0||t.type!=e.frontalConst},domProps:{value:t.hours},on:{input:[function(s){s.target.composing||e.$set(t,"hours",s.target.value)},function(t){return e.getPauseAndPrivateHours()}]}})]),s("td",{staticClass:"disableStyle"}),e._l(t.week,(function(r,o){return s("td",{key:o},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.week[o],expression:"row.week[index2]"}],attrs:{type:"number",min:"0",step:"0.1",disabled:t.hours<=0},domProps:{value:t.week[o]},on:{input:function(s){s.target.composing||e.$set(t.week,o,s.target.value)}}})])})),s("td",{staticClass:"disableStyle",style:{color:0==e.validRowsHours(t)?"red":"inherit"}},[e._v(" "+e._s(e.getTwoDigits(e.leftHours(t)))+" ")])],2)})),s("tr",{staticClass:"summaryRow"},[s("td"),s("td",[e._v("סך")]),s("td",[e._v("--")]),s("td",[e._v(e._s(e.hoursAmount()))]),s("td",[e._v(e._s(e.getTwoDigits(e.calcJobPercent()))+"%")]),e._l(parseInt(6),(function(t,r){return s("td",{key:r},[e._v(" "+e._s(e.dayAmount(t-1))+" ")])})),s("td",{style:{color:0==e.validTotalHours()?"red":"inherit"}},[e._v(" "+e._s(e.getTwoDigits(e.leftTableHours()))+" ")])],2)],2)]),s("v-btn",{staticClass:"myBtn",attrs:{color:"primary"},on:{click:function(t){return e.saveHours()}}},[e._v("שמור שעות")]),s("v-btn",{staticClass:"myBtn",attrs:{color:""},on:{click:function(t){return e.cleanWeeklyData()}}},[e._v("נקה")])],1)]):e._e()},f=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th"),s("th",[e._v("סוג")]),s("th",[e._v("קוד פיצול")]),s("th",[e._v("שעות")]),s("th",[e._v("אחוז משרה")]),s("th",[e._v("א'")]),s("th",[e._v("ב'")]),s("th",[e._v("ג'")]),s("th",[e._v("ד'")]),s("th",[e._v("ה'")]),s("th",[e._v("ו'")]),s("th",[e._v("הפרש")])])])}],m=(s("a434"),s("56d7")),p=1,g=2,v=3,y={name:"weeklyHours",props:["empId","reformType","isMother","ageHours","existData","begda","endda"],data:function(){return{newHours:[],tableBegda:"",tableEndda:"",datesRange:{min:"",max:""},tableToSave:[],tablesArray:[],empOptions:[],reformTypes:[],codeDescription:[],frontalCodes:[],existHours:[],frontalConst:p}},created:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.initilizer();case 2:return t.next=4,e.getCodeDescription();case 4:return t.next=6,e.setBegdaEndda();case 6:return t.next=8,e.getEmployeeOptions();case 8:return t.next=10,e.getExistData();case 10:case"end":return t.stop()}}),t)})))()},methods:{getPauseAndPrivateHours:function(){if(2==this.reformType||5==this.reformType){var e=Math.round(this.newHours.filter((function(e){return e.type==p})).reduce((function(e,t){return e+parseFloat(t.hours)}),0));e<=0||(this.newHours.find((function(e){return e.type==v})).hours=this.empOptions.find((function(t){return t.frontalHours==e})).pauseHours,this.newHours.find((function(e){return e.type==g})).hours=this.empOptions.find((function(t){return t.frontalHours==e})).privateHours)}},getCodeDescription:function(){var e=this;u.a.get("/convertHours/byReform",{params:{reformType:this.reformType}}).then((function(t){e.codeDescription=t.data,e.setFrontalCodes()})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},getEmployeeOptions:function(){var e=this;u.a.get("/calcHours/options",{params:{reformType:this.reformType,empId:this.empId}}).then((function(t){e.empOptions=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},getExistData:function(){var e=this;u.a.get("/teacherEmploymentDetails/byReform",{params:{empId:this.empId,mossadId:this.$store.state.logginAuth,reformType:this.reformType,begda:this.FormatDate(this.begda),endda:this.FormatDate(this.endda)}}).then((function(t){e.existHours=t.data,null!=e.existHours&&e.setExistHours()})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},setNewHoursForSave:function(){var e=this;this.tableToSave=[],this.newHours.forEach((function(t){t.week.forEach((function(s,r){e.tableToSave.push({empId:e.empId,mossadId:e.$store.state.logginAuth,changedBy:e.$store.state.username,empCode:t.code,begda:new Date(e.tableBegda),endda:new Date(e.tableEndda),day:r,hours:s})}))}))},setPrivateAndPauseCodes:function(e){2!=this.reformType&&5!=this.reformType||""==e||(5==this.reformType?(this.newHours.find((function(e){return e.type==g})).code=9601,this.newHours.find((function(e){return e.type==v})).code=9602):2==this.reformType&&(this.newHours.find((function(e){return e.type==v})).code=5468,this.newHours.find((function(e){return e.type==g})).code=5467))},setExistHours:function(){var e,t=this,s={};this.existHours.forEach((function(r){e=t.codeDescription.find((function(e){return e.code==r.empCode})).hourType,e==p&&""!=t.newHours.find((function(t){return t.type==e})).code?void 0==t.newHours.find((function(e){return e.code==r.empCode}))?(s={type:p,hours:r.hours,code:r.empCode,week:[0,0,0,0,0,0]},s.week[r.day]=r.hours,t.newHours.push(s)):(t.newHours.find((function(e){return e.code==r.empCode})).hours+=r.hours,t.newHours.find((function(e){return e.code==r.empCode})).week[r.day]+=r.hours):(t.newHours.find((function(t){return t.type==e})).week[r.day]=r.hours,t.newHours.find((function(t){return t.type==e})).hours+=r.hours,t.newHours.find((function(t){return t.type==e})).code=r.empCode)})),this.setPrivateAndPauseCodes(this.newHours.find((function(e){return e.type==p})).code),this.sortTable()},calcJobPercent:function(){return 0==this.hoursAmount()?0:1==this.reformType||7==this.reformType?this.getOlamYashanJobPercent(this.ageHours,this.isMother,this.hoursAmount()):2==this.reformType?this.getOfekHasashJobPercent(this.ageHours,this.isMother,this.hoursAmount()):5==this.reformType?this.getOzLetmuraJobPercent(this.ageHours,this.isMother,this.hoursAmount()):8==this.reformType?this.getMinhalaJobPercent(this.ageHours,this.isMother,this.hoursAmount()):void 0},removeRow:function(e){0!==e&&this.newHours[e].type==p&&(this.newHours.splice(e,1),this.getPauseAndPrivateHours())},addNewRow:function(){this.newHours.push({type:p,hours:0,code:"",week:[0,0,0,0,0,0]}),this.sortTable()},sortTable:function(){this.newHours.sort((function(e,t){return e.type-t.type}))},setBegdaEndda:function(){this.tableBegda=this.FormatDate(this.begda),this.tableEndda=this.FormatDate(this.endda)},FormatDate:function(e){var t,s=new Date(e),r=s.getFullYear(),o=0,n=0;return o+=s.getMonth()+1,o<10&&(o="0"+o),s.getDate()<10&&(n="0"),n+=s.getDate(),t=r+"-"+o+"-"+n,t},isNumber:function(e){return!isNaN(parseFloat(e))&&!isNaN(e-0)},getTwoDigits:function(e){return isNaN(e)||0==e?0:parseFloat(e).toFixed(2)},currCodeDescription:function(e){return void 0!=e&&e>0?void 0===this.codeDescription.find((function(t){return t.code==e}))?"":this.codeDescription.find((function(t){return t.code==e})).codeDescription:""},getAllFrontalHours:function(){return this.newHours.filter((function(e){return e.type==p})).reduce((function(e,t){return e+parseFloat(t.hours)}),0)},saveHours:function(){var e=this,t=!0;if(this.newHours.forEach((function(s){0!=e.validRowsHours(s)||(t=!1)})),0==t)return alert("יש למלא שעות תקינות"),!1;this.setNewHoursForSave(),u()({url:"/teacherEmploymentDetails/saveAll",method:"post",data:this.tableToSave}).then((function(){alert("הנתונים נשמרו בהצלחה"),m["bus"].$emit("changeWeeklyHours")})).catch((function(t){e.$store.dispatch("displayErrorMessage",{error:t})}))},convertReformDescription:function(e){return e==g?"פרטני":e==v?"שהייה":"פרונטלי"},validRowsHours:function(e){return void 0==e.hours||0==this.leftHours(e)},validTotalHours:function(){return 0==this.leftTableHours()},leftHours:function(e){var t=e.week;return parseFloat(t.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0))-e.hours},leftTableHours:function(){var e=this;return this.newHours.reduce((function(t,s){return parseFloat(t)+e.leftHours(s)}),0)},hoursAmount:function(){var e=this;return this.newHours.filter((function(t){return e.isNumber(t.hours)})).reduce((function(e,t){return parseFloat(e)+parseFloat(t.hours)}),0)},dayAmount:function(e){return this.newHours.reduce((function(t,s){return parseFloat(t)+parseFloat(s.week[e])}),0)},initilizer:function(){this.newHours=[],5==this.reformType||2==this.reformType?this.newHours=[{type:p,hours:0,code:"",week:[0,0,0,0,0,0]},{type:g,hours:0,code:"",week:[0,0,0,0,0,0]},{type:v,hours:0,code:"",week:[0,0,0,0,0,0]}]:this.newHours=[{type:p,hours:0,code:"",week:[0,0,0,0,0,0]}]},cleanWeeklyData:function(){this.newHours.forEach((function(e){e.hours=0,e.week=[0,0,0,0,0,0]}))},getOlamYashanJobPercent:function(e,t,s){var r=0,o=24;return o-=e,r=s/o*100,t&&(r*=1.1),r},getOfekHasashJobPercent:function(e,t,s){var r=0,o=36;return o-=e,t&&(o-=2),r=s/o*100,r},getOzLetmuraJobPercent:function(e,t,s){var r=0,o=40;return o-=e,r=s/o*100,t&&(s>=31.5?r+=7:r*=1.1),r},getMinhalaJobPercent:function(e,t,s){var r=0,o=20;return r=s/o*100,r},setFrontalCodes:function(){var e=this;this.frontalCodes=this.codeDescription.filter((function(t){return(t.hourType==p||0==t.hourType)&&!e.newHours.find((function(e){return e.code==t.code}))}))}},watch:{empId:function(e){this.empId=e,this.initilizer(),this.getCodeDescription(),this.getEmployeeOptions()},reformType:function(e){this.reformType=e,this.initilizer(),this.getCodeDescription(),this.getEmployeeOptions()}}},b=y,w=(s("b265"),s("2877")),H=s("6544"),_=s.n(H),x=s("8336"),I=s("132d"),T=s("b974"),D=Object(w["a"])(b,h,f,!1,null,"53b7b45b",null),k=D.exports;_()(D,{VBtn:x["a"],VIcon:I["a"],VSelect:T["a"]});var E={name:"weeklyHours",props:["empId","reformType","isMother","ageHours","selectedYear"],components:{weeklyHoursTable:k},data:function(){return{datesRange:{min:"",max:""},tablesArray:[],reformTypes:[],codeDescription:[],existHours:[]}},created:function(){this.getReformTypes(),this.setBegdaEndda(),this.getExistData()},methods:{getExistData:function(){var e=this;u.a.get("/teacherEmploymentDetails/byReform",{params:{empId:this.empId,mossadId:this.$store.state.logginAuth,reformType:this.reformType,begda:this.FormatDate(this.datesRange.min),endda:this.FormatDate(this.datesRange.max)}}).then((function(t){e.existHours=t.data,e.gruopByBegdaEndda()})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},gruopByBegdaEndda:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.existHours.forEach((function(t){var s=e.tablesArray.find((function(s){return s.begda==e.FormatDate(t.begda)&&s.endda==e.FormatDate(t.endda)}));null!=s?s.data.push(t):e.tablesArray.push({begda:e.FormatDate(t.begda),endda:e.FormatDate(t.endda),data:[t]})}));case 2:e.setDefualtValues();case 3:case"end":return t.stop()}}),t)})))()},getReformTypes:function(){var e=this;u.a.get("/reformTypes/relevant").then((function(t){e.reformTypes=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},setBegdaEndda:function(){this.datesRange.min=new Date(this.selectedYear-1,8,1),this.datesRange.max=new Date(this.selectedYear,5,20)},setDefualtValues:function(){0==this.tablesArray.length&&this.tablesArray.push({begda:this.FormatDate(this.datesRange.min),endda:this.FormatDate(this.datesRange.max),data:{}})},addWeeklHoursTable:function(){var e=new Date(this.tablesArray.reduce((function(e,t){return e.endda>t.endda?e:t})).endda);e.setDate(e.getDate()+1),e<this.datesRange.max?this.tablesArray.push({begda:this.FormatDate(e),endda:this.FormatDate(this.datesRange.max),data:{}}):alert("אין אפשרות ליצור יותר מרושמה אחת על תאריכים חופפים")},removeWeeklHoursTable:function(){this.tablesArray.pop()},setDatesIfChange:function(e){(e.endda>this.FormatDate(this.datesRange.max)||e.endda<this.FormatDate(this.datesRange.min))&&(e.endda=this.FormatDate(this.datesRange.max)),(e.begda>this.FormatDate(this.datesRange.max)||e.begda<this.FormatDate(this.datesRange.min))&&(e.begda=this.FormatDate(this.datesRange.min))},FormatDate:function(e){var t,s=new Date(e),r=s.getFullYear(),o=0,n=0;return o+=s.getMonth()+1,o<10&&(o="0"+o),s.getDate()<10&&(n="0"),n+=s.getDate(),t=r+"-"+o+"-"+n,t}},computed:{_reformDiscription:function(){var e=this,t=this.reformTypes.find((function(t){return t.reformId==e.reformType}));return void 0!=t?t.name:""}},watch:{empId:function(e){this.empId=e,this.getExistData()},reformType:function(e){this.reformType=e,this.getExistData()},selectedYear:function(e){this.selectedYear=e,this.tablesArray=[],this.setBegdaEndda(),this.getExistData()}}},R=E,F=(s("320d"),s("62ad")),C=s("0fd9"),A=s("8654"),M=Object(w["a"])(R,d,c,!1,null,"69cbda51",null),Y=M.exports;_()(M,{VCol:F["a"],VRow:C["a"],VTextField:A["a"]});var $=s("87cf"),O={name:"setEmployeesHours",components:{weeklyHours:Y},data:function(){return{search:null,selectedReforms:null,selectedYear:2021,empId:null,tzArray:[],datesRange:{min:"",max:""},employeeInfo:{},existHours:[],weeklyHoursComponents:[],reformTypes:[],mossadInfo:{},hoverText:"",test:{}}},created:function(){this.initilize(),this.getAllTz(),this.getReformTypes(),this.setBegdaEndda(),this.getMossadHours()},mounted:function(){var e=this;m["bus"].$on("changeWeeklyHours",(function(){e.getWeeklySum(),e.getMossadHours()}))},computed:{_getAge:function(){var e=new Date,t=new Date(this.employeeInfo.birthDate),s=0,r=e.getFullYear()-t.getFullYear();return e.getUTCMonth()<t.getUTCMonth()&&(r-=1),s=e.getUTCMonth()-t.getUTCMonth(),s<0&&(s*=-1),s<10&&(s="0"+s),r+"."+s},formatGender:function(){if(void 0!=this.employeeInfo.gender)return"M"===this.employeeInfo.gender?"זכר":"נקבה"},formatIsMother:function(){return!0===this.employeeInfo.mother?"כן":"לא"},_getAgeHours:function(){if(void 0===this.employeeInfo.birthDate)return null;var e=new Date(this.employeeInfo.birthDate),t=new Date,s=new Date(t.getFullYear(),8,1);t.getMonth()>=8&&s.setFullYear(s.getFullYear()+1);var r=s.getFullYear()-e.getFullYear();return r<50?0:r>55?4:2}},methods:{initilize:function(){this.mossadInfo.mossadId=this.$store.state.mossadId,this.mossadInfo.mossadName=this.$store.state.mossadInfo.mossadName,this.years=[{year:2021,hebrewYear:'תשפ"א'},{year:2022,hebrewYear:'תשפ"ב'},{year:2023,hebrewYear:'תשפ"ג'},{year:2024,hebrewYear:'תשפ"ד'},{year:2025,hebrewYear:'תשפ"ה'}]},onYearChanged:function(){this.initilize(),this.setBegdaEndda(),this.getMossadHours(),this.getWeeklySum()},totalHours:function(e){if(null!=e){for(var t=0,s=0;s<6;s++)t+=parseFloat(e[s]);return t}return 0},getRowType:function(e){return 1===e?"במוסד":"בכל המוסדות"},getAllTz:function(){var e=this;u.a.get("/employees/all").then((function(t){e.tzArray=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},getEmployeeInfo:function(){var e=this;u.a.get("/employees/byId",{params:{empId:this.empId}}).then((function(t){e.employeeInfo=t.data})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})})),this.getWeeklySum()},getMossadHours:function(){var e=this;this.mossadInfo.currHours=0,this.mossadInfo.maxHours=0,u.a.get("mossadHours/byId",{params:{mossadId:this.$store.state.logginAuth,year:this.selectedYear}}).then((function(t){e.mossadInfo.currHours=t.data.currHours,e.mossadInfo.maxHours=t.data.maxHours})).catch((function(){alert("לא נמצאו נתונים עבור מוסד בשנה זו בחר שנה אחרת או הוסף שעות למוסד")}))},getWeeklySum:function(){var e=this;this.existHours=[],u.a.get("/teacherEmploymentDetails/weekSumPerMossad",{params:{empId:this.empId,mossadId:this.$store.state.logginAuth,begda:this.datesRange.min,endda:this.datesRange.max}}).then((function(t){e.existHours.push({type:1,week:t.data}),u.a.get("/teacherEmploymentDetails/weekSum",{params:{empId:e.empId,begda:e.datesRange.min,endda:e.datesRange.max}}).then((function(t){e.existHours.push({type:2,week:t.data})}))})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},getReformTypes:function(){var e=this;u.a.get("/reformTypes/relevant").then((function(t){e.reformTypes=t.data,e.filterReformTypeByMossad()})).catch((function(t){return e.$store.dispatch("displayErrorMessage",{error:t})}))},setBegdaEndda:function(){this.datesRange.min=this.formatDate(new Date(this.selectedYear-1,8,1)),this.datesRange.max=this.formatDate(new Date(this.selectedYear,5,20))},formatDate:function(e){var t,s=new Date(e),r=s.getFullYear(),o=0,n=0;return o+=s.getMonth()+1,o<10&&(o="0"+o),s.getDate()<10&&(n="0"),n+=s.getDate(),t=r+"-"+o+"-"+n,t},exportEmployeeWeeklyHours:function(){this.createWeeklyHoursToEmployee(this.empId,this.$store.state.logginAuth,this.datesRange.min,this.datesRange.max)},navigateToHirePage:function(){this.$router.push("/HireEmp")},filterReformTypeByMossad:function(){2==this.$store.state.mossadInfo.mossadType?this.reformTypes=this.reformTypes.filter((function(e){return 1==e.reformId||5==e.reformId||7==e.reformId||2==e.reformId||8==e.reformId})):1==this.$store.state.mossadInfo.mossadType&&(this.reformTypes=this.reformTypes.filter((function(e){return 1==e.reformId||5==e.reformId||8==e.reformId}))),this.reformTypes.filter},getTwoDigits:function(e){return isNaN(e)?"":parseFloat(e).toFixed(2)},changeText:function(e){this.hoverText=this.existHours[1].week[e-1]},testFunction:function(){u.a.get("/")}},mixins:[$["a"]]},N=O,B=(s("fb99"),s("c6a6")),P=s("b0af"),S=(s("9734"),s("4ad4")),W=s("a9ad"),z=s("16b7"),j=s("b848"),V=s("75eb"),J=s("f573"),L=s("f2e7"),U=s("80d2"),q=s("d9bd"),X=s("58df"),G=Object(X["a"])(W["a"],z["a"],j["a"],V["a"],J["a"],L["a"]).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,fixed:{type:Boolean,default:!0},openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String,zIndex:{default:null}},data:()=>({calculatedMinWidth:0,closeDependents:!1}),computed:{calculatedLeft(){const{activator:e,content:t}=this.dimensions,s=!this.bottom&&!this.left&&!this.top&&!this.right,r=!1!==this.attach?e.offsetLeft:e.left;let o=0;return this.top||this.bottom||s?o=r+e.width/2-t.width/2:(this.left||this.right)&&(o=r+(this.right?e.width:-t.width)+(this.right?10:-10)),this.nudgeLeft&&(o-=parseInt(this.nudgeLeft)),this.nudgeRight&&(o+=parseInt(this.nudgeRight)),this.calcXOverflow(o,this.dimensions.content.width)+"px"},calculatedTop(){const{activator:e,content:t}=this.dimensions,s=!1!==this.attach?e.offsetTop:e.top;let r=0;return this.top||this.bottom?r=s+(this.bottom?e.height:-t.height)+(this.bottom?10:-10):(this.left||this.right)&&(r=s+e.height/2-t.height/2),this.nudgeTop&&(r-=parseInt(this.nudgeTop)),this.nudgeBottom&&(r+=parseInt(this.nudgeBottom)),this.calcYOverflow(r+this.pageYOffset)+"px"},classes(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY(){return this.top||this.bottom},offsetX(){return this.left||this.right},styles(){return{left:this.calculatedLeft,maxWidth:Object(U["g"])(this.maxWidth),minWidth:Object(U["g"])(this.minWidth),opacity:this.isActive?.9:0,top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount(){this.$nextTick(()=>{this.value&&this.callActivate()})},mounted(){"v-slot"===Object(U["q"])(this,"activator",!0)&&Object(q["b"])("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate(){this.runDelay("close")},genActivatorListeners(){const e=S["a"].options.methods.genActivatorListeners.call(this);return e.focus=e=>{this.getActivator(e),this.runDelay("open")},e.blur=e=>{this.getActivator(e),this.runDelay("close")},e.keydown=e=>{e.keyCode===U["u"].esc&&(this.getActivator(e),this.runDelay("close"))},e},genTransition(){const e=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[e]):e},genContent(){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:{[this.contentClass]:!0,menuable__content__active:this.isActive,"v-tooltip__content--fixed":this.activatorFixed},style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render(e){return e(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent(()=>[this.genTransition()]),this.genActivator()])}}),Z=Object(w["a"])(N,n,a,!1,null,"06c0c947",null),K=Z.exports;_()(Z,{VAutocomplete:B["a"],VCard:P["a"],VCol:F["a"],VIcon:I["a"],VRow:C["a"],VSelect:T["a"],VTooltip:G});var Q={name:"employeeInfo",components:{setEmployeesHours:K},data:function(){return{}}},ee=Q,te=Object(w["a"])(ee,r,o,!1,null,"d08aab0a",null);t["default"]=te.exports},"320d":function(e,t,s){"use strict";var r=s("a7ab"),o=s.n(r);o.a},"408a":function(e,t,s){var r=s("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},4850:function(e,t,s){},9734:function(e,t,s){},a7ab:function(e,t,s){},b265:function(e,t,s){"use strict";var r=s("4850"),o=s.n(r);o.a},b680:function(e,t,s){"use strict";var r=s("23e7"),o=s("a691"),n=s("408a"),a=s("1148"),i=s("d039"),u=1..toFixed,d=Math.floor,c=function(e,t,s){return 0===t?s:t%2===1?c(e,t-1,s*e):c(e*e,t/2,s)},l=function(e){var t=0,s=e;while(s>=4096)t+=12,s/=4096;while(s>=2)t+=1,s/=2;return t},h=u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i((function(){u.call({})}));r({target:"Number",proto:!0,forced:h},{toFixed:function(e){var t,s,r,i,u=n(this),h=o(e),f=[0,0,0,0,0,0],m="",p="0",g=function(e,t){var s=-1,r=t;while(++s<6)r+=e*f[s],f[s]=r%1e7,r=d(r/1e7)},v=function(e){var t=6,s=0;while(--t>=0)s+=f[t],f[t]=d(s/e),s=s%e*1e7},y=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==f[e]){var s=String(f[e]);t=""===t?s:t+a.call("0",7-s.length)+s}return t};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(m="-",u=-u),u>1e-21)if(t=l(u*c(2,69,1))-69,s=t<0?u*c(2,-t,1):u/c(2,t,1),s*=4503599627370496,t=52-t,t>0){g(0,s),r=h;while(r>=7)g(1e7,0),r-=7;g(c(10,r,1),0),r=t-1;while(r>=23)v(1<<23),r-=23;v(1<<r),g(1,1),v(2),p=y()}else g(0,s),g(1<<-t,0),p=y()+a.call("0",h);return h>0?(i=p.length,p=m+(i<=h?"0."+a.call("0",h-i)+p:p.slice(0,i-h)+"."+p.slice(i-h))):p=m+p,p}})},ed16:function(e,t,s){},fb99:function(e,t,s){"use strict";var r=s("ed16"),o=s.n(r);o.a}}]);
//# sourceMappingURL=EmployeeInfo.82f2b212.js.map